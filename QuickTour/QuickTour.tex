% $Author$
% $Date$
% $Revision$

%small changes to test commit

% HISTORY:
% 2006-12-01 - Andrew edited (split from FirstApp?)
% 2006-12-03 - Andrew first draft
% 2006-12-06 - Stef edit
% 2007-06-11 - Oscar edit
% 2007-07-03 - Stef review
% 2007-08-22 - Andrew corrections
% 2007-09-11 - Marcus review
% 2007-09-11 - Orla review
% 2009-07-04 - Oscar migrated to Pharo
% 2011-05-17 - Gabriel Falcone starts spanish translation

%=================================================================
\ifx\wholebook\relax\else
% --------------------------------------------
% Lulu:
	\documentclass[a4paper,10pt,twoside]{book}
	\usepackage[
		papersize={6.13in,9.21in},
		hmargin={.75in,.75in},
		vmargin={.75in,1in},
		ignoreheadfoot
	]{geometry}
	\input{../common.tex}
	\pagestyle{headings}
	\setboolean{lulu}{true}
% --------------------------------------------
% A4:
%	\documentclass[a4paper,11pt,twoside]{book}
%	\input{../common.tex}
%	\usepackage{a4wide}
% --------------------------------------------
    \graphicspath{{figures/} {../figures/}}
	\begin{document}
	% \renewcommand{\nnbb}[2]{} % Disable editorial comments
	\sloppy
\fi
%=================================================================
\newcommand{\clover}{%
	\raisebox{-0.8ex}[0pt][0pt]{%
		\includegraphics[width=1em]{cloverleafKey}}}
%=================================================================
\chapter{Un paseo rápido por \pharo}
\chalabel{quick}

En este capítulo te daremos un paseo de alto nivel por \pharo para ayudarte a sentirte cómodo con el ambiente.
Habrá muchas oportunidades para probar cosas, por lo que sería una buena idea que tengas una computadora a mano mientras lees este capítulo.

Usaremos el ícono: \dothisicon{} para marcar lugares en el texto donde deberías probar algo en \pharo.
En particular, lanza \pharo, aprende acerca de las diferentes formas de interactuar con el sistema, y descubre algunas de las herramientas básicas.
Aprenderás también cómo definir un nuevo método, crear un objeto y enviarle mensajes.

%=================================================================
\section{Primeros pasos}

\pharo está disponible de forma gratuita para \ind{download} en \pharoweb.
Hay tres partes que necesitas descargar, que consisten en cuatro archivos (vea \figref{download}).

\begin{figure}[htb]
\centerline {\includegraphics[width=\textwidth]{annotatedDownload-flat}}
\caption{Los archivos de \pharo para descargar de una de las plataformas soportadas.\figlabel{download}}
\end{figure}

\begin{enumerate}

  \item La \emphind{máquina virtual} (VM) es la única parte del sistema que es diferente para cada sistema operativo y procesador. Hay disponibles máquinas virtuales precompiladas para la mayor parte de los ambientes. En la \figref{download} vemos la VM para la plataforma seleccionada, su nombre es \textit{Pharo.exe}.

  \item El archivo \emphind{sources} contiene el código fuente de todas las partes de \pharo que no cambian muy frecuentemente. En la \figref{download} su nombre es \emph{SqueakV39.sources}.\footnote{\pharo está derivado de \squeak 3.9, y actualmente comparte la VM con \squeak.}

  \item La \emph{system \ind{image}} actual es un snapshot de un sistema \pharo corriendo, congelado en un momento. Consiste de dos archivos: un archivo de \emph{.}\emphind{image}, que contiene el estado de todos los objetos en el sistema (incluidos clases y métodos, dado que son objetos también), y un archivo \emph{.}\emphind{changes}, que contiene un log de todos los cambios en el código fuente del sistema.
En la \figref{download}, sus nombres son \emph{pharo.image} y \emph{pharo.changes}.
\end{enumerate}

\dothis{Descarga e instala \pharo en tu computadora.}
Te recomendamos que uses la imagen provista en la página \pharo by Example.\footnote{\pbe}
\index{download}
\seclabel{sbeImage}

La mayor parte del material introductorio de este libro funciona con cualquier versión por lo que si ya tienes una versión de \pharo, puedes continuar usándola.
Sin embargo, si notas diferencias entre la apariencia o el comportamiento de tu sistema y el descripto aquí, no te preocupes. 
% On the other hand, if you are about to download \pharo for the first time, you may as well grab the \emph{\pharo by Example} image.

Al trabajar en \pharo, el archivo de imágen y el archivo de cambios se modifican por lo que necesitas asegurarte que ambos pueden escribirse.
Mantén siempre estos archivos juntos.
Nunca los edites directamente con un editor de texto, ya que \pharo los usa para almacenar los objetos con los que está trabajando y para registrar los cambios en que haces en el código fuente.
Es una buena idea guardar una copia de los archivos de imágen y cambios descargados para poder siempre empezar de una imágen limpia y recargar tu código.

El archivo \emphind{sources} y la VM pueden estar como solo lectura\,---\,pueden ser compartidas entre diferentes usuarios.
Todos estos archivos pueden ser puestos en el mismo directorio y es también posible poner la máquina virtualy el archivo and \emphind{sources} en directorio separado donde todos tengan acceso a ellos.
Haz lo que funcione mejor con tu estilo de trabajo y tu sistema operativo.

%\sd{it would be really nice to have a setup and startup section on PC, Mac and Linux}
%\ab{I agree entirely; the reason that this is not here is because I could do only the Mac section.  Damien can probably do Windoze.  Perhaps we can ask on the list for a Linux volunteer?}

%-----------------------------------------------------------------
\begin{figure}[htb]
% \centerline {\includegraphics[width=0.6\textwidth]{download}}
\centerline {\includegraphics[width=\textwidth]{startup}}
\caption{Una imagen limpia de \pbe.\figlabel{startup}}
\end{figure}

\index{launching \pharo}
\paragraph{Comenzando.} Para arrancar \pharo, haz lo que tu sistema operativo espera: arrastra el archivo \emph{.}\emphind{image} sobre el ícono de la máquina virtual, o haz doble clic en el arhivo \emph{.image}, o en la linea de comandos escribe el nombre de la máquina virtual seguido de la ruta al archivo \emph{.image}. (Si tienes multiples máquinas virtuales en tu máquina el sistema operativo puede no elegir la correcta; en ese caso es mas seguro arrastrar y soltar la imagen sobre la máquina virtual, o usar la linea de comandos.)

Una vez que \pharo está ejecutando, deberías ver una única ventana, posiblemente conteniendo algunas ventanas de workspace abiertos (ver \figref{startup}) ¡y no es ovbio cómo continuar!
Puedes notar una barra de menú, pero principalmente \pharo hace uso de menues contextuales.
% You will notice that there is no menu bar, or at least not a useful one.  
% Instead,  \pharo makes heavy use of context-dependent pop-up menus.

\dothis{Ejecuta \pharo. Puedes cerrar cualquier workspaces abierto haciendo \click{ing} en el botón rojo en la esquina superior izquierda de la ventana del workspace.}

Puedes minimizar ventanas (estas se moverán a la parte inferior de la pantalla) haciendo \click{ing} en el botón naranja. Haciendo clic en el botón verde la ventana ocupará la pantalla completa.

%-----------------------------------------------------------------
\paragraph{Primera interacción.}

Un buen lugar para comenzar es el menú \ind{world menu} mostrado en \figref{threeButtons:click}. 

\dothis{Haz clic con el ratón en el fondo de la ventana principal para mostrar el menú world, elige \menu{Workspace} para crear un nuevo workspace.}

%\begin{figure}[tbh]
%	\centering
%	\subfigure[The world menu]{\figlabel{threeButtons:click}% click
%		\includegraphics[width=0.25\linewidth]{worldMenu}}\hfill
%	\subfigure[The contextual menu]{\figlabel{threeButtons:actclick}% action click
%		\includegraphics[width=0.35\linewidth]{yellowButtonMenuOnWorkspace}}\hfill
%	\subfigure[The morphic halo]{\figlabel{threeButtons:metaclick}% meta click
%		\includegraphics[width=0.35\linewidth]{morphicHaloOnWorkspace}}% these braces needed (else no whitespace at end of line)
%	\caption{The world menu (brought up by \click{ing}), a contextual menu (\actclick{ing}), and a morphic \subind{Morphic}{halo} (\metaclick{ing}).\figlabel{threeButtons}}
%\end{figure}

\begin{figure}[tbh]
	\centering
	\subfigure[The world menu]{\figlabel{threeButtons:click}% click
		\includegraphics[width=0.40\linewidth]{worldMenu}}\hfill
	\subfigure[The contextual menu]{\figlabel{threeButtons:actclick}% action click
		\includegraphics[width=0.55\linewidth]{yellowButtonMenuOnWorkspace}}\hfill
	\subfigure[The morphic halo]{\figlabel{threeButtons:metaclick}% meta click
		\includegraphics[width=0.60\linewidth]{morphicHaloOnWorkspace}}% these braces needed (else no whitespace at end of line)
	\caption{The world menu (brought up by \click{ing}), a contextual menu (\actclick{ing}), and a morphic \subind{Morphic}{halo} (\metaclick{ing}).\figlabel{threeButtons}}
\end{figure}
\seeindex{morphic halo}{Morphic}

%% ON: I had to shrink this and move it up to avoid
%% it running over the end of the page.
%\begin{wrapfigure}[19]{r}{0.25\linewidth}
%% The parameters are the number of narrow lines to the right of the figure [19],
%% the placement {r} for right, and the width of the figure. Capital R will allow some float.
%% Inside the wrapfig environment, linewidth is special --- the width of the figure.
%\includegraphics[width=0.95\linewidth]{colouredMouse}
%\caption{The author's mouse. \click{ing} the scroll wheel activates the blue button.}
%\figlabel{colouredMouse}
%\end{wrapfigure}

\st fué diseñado originalmente para computadoras con un \ind{ratón de tres botones}. Si tu ratón tiene menos de tres botones, tendrás que presionar teclas extras mientras \click{ing} el ratón para simular los botones faltantes. Un ratón de dos botones funciona bastante bien con \pharo, pero si tienes un ratón de un solo botón, deberías considerar seriamente comprar un ratón de dos botones con rueda de desplazamiento que permita hacer clic: hará que trabajar con \pharo mucho mas placentero.

\pharo evita términos como ``clic con el botón izquierdo'' porque diferentes computadoras, ratones, teclados y configuraciones personales significa que diferentes usuarios necesitarán presionar diferentes botones parato lograr el mismo efecto.
Originalmente \st introdujo colores para representar los diferentes botones del ratón.\footnote{Los colores de los botones eran \emph{rojo}, \emph{amarillo} y \emph{azul}. Los autores de este libro nunca podían recordar qué color refería a qué botón.}
\index{red button}
\index{yellow button}
\index{blue button}
Dado que muchos usuarios usaran teclas modificadoras (\emph{control}, \emph{ALT}, \emph{meta} \etc) para lograr el mismo efecto, en su lugar usaremos los siguientes términos:
\begin{description}
\item [\click:] este es el botón del reatón mas usado, y es quivalente a \click{ing} un ratón de un solo botón sin ninguna tecla modificadora; \click{} en la imagen para para que aparezca el menú ``World'' (\figref{threeButtons:click}).
\item [\actclick:] este es el segundo botón mas usado; es usado para que aparezca el menú contextual, eso es, un menú que ofrece diferentes conjuntos de acciones dependiendo en donde está apuntando el ratón; vea \figref{threeButtons:actclick}. Si no tienes un ratón multi-botones, normalmente configurarás la tecla modificadora \emph{control} para \actclick con el botón del ratón.
\item [\metaclick:] Finalmente, puedes \metaclick en cualquier objeto mostrado en la imagen para activar el ``morphic \subind{Morphic}{halo}'', un vector de manejadores que son usados para realizar operaciones en los objetos en pantalla, como por ejemplo rotarlos o cambiarles el tamaño; vea \figref{threeButtons:metaclick}.\footnote{Notar que manejadores morphic estan inactivos por defecto en \pharo, pero puedes activarlos usando el Navegador de Preferencias, el cual veremos pronto.}
Si dejas el ratón sobre un manejador, un globo de ayuda te explicará su función.
En \pharo, como \metaclick depende de tu sistema operativo:
o bien debes mantener las teclas {\sc shift} + \emph{ctrl} o bien {\sc shift} + \emph{option} mientras haces clic.
% \ab{This makes it sound like either {\sc shift} \emph{ctrl} or {\sc shift} \emph{alt} will work.  On my (Mac OS) system, only the latter works.  Perhaps we want to say: In \pharo, how you meta-click depends on your operating system. On Linux \ldots}
% Typically you will use a third modifier key, such as \emph{command} or \emph{meta} to \metaclick.
\end{description}

\dothis{Escribe \ct{Time now} en el workspace.
Ahora \actclick en area de trabajo.
Selecciona \menu{print it}.}

%Now we will activate \metaclick{ing}.

%\dothis{Open the preference browser (\menu{System {\ldots\go} Preferences {\ldots\go} Preference Browser\ldots}) and find the \menu{halosEnabled} option using the search box.}

%\begin{figure}[htb]
%\centerline{\includegraphics[width=\textwidth]{PreferenceBrowser}}
%\caption{The Preference Browser.\figlabel{prefBrowser}}
%\end{figure}

%\dothis{Now you should be able to \metaclick on the workspace. (See \figref{threeButtons:metaclick}.)
%Grab the blue \raisebox{-0.4ex}{\includegraphics[width=1em]{morphicRotate}} handle near the bottom left corner and drag it to rotate the workspace.}

Recomendamos a las personas diestras configurar sus ratones para hacer \click con el botón izquierdo, \actclick con el botón derecho, y \metaclick con la rueda de desplazamiento si está disponible.
% If you don't have a clickable scroll wheel, then you can get the Morphic halo by holding down the \ct{alt} or \ct{option} key while \click{ing}. 
% \ab{This doesn't work any more.  This sentence either repeats or contradicts the meta-click item above; neither is a good idea.}
Si estás usando Macintosh sin un ratón con segundo botón, puedes simularlo manteniendo presionada la tecla \clover{} mientras \click{ing} el ratón. Sin embargo, si vas a usar \pharo a menudo, te recomendamos invertir en un ratón con al menos dos botones.

Puedes configurar tu ratón para trabajar de la manera que quieras uasndo las preferencias de tu sistema operativo y el controlador del ratón.
\ab{Como puedo obtener meta-clic sin un saludo de tres dedos? Es un secreto?}
\pharo tiene algunas preferencias para personalizar el ratón y las teclas meta en tu teclado.
En el navegador de preferencias (\menu{System {\ldots\go} Preferences {\ldots\go} Preference Browser\ldots}), la categoría \menu{keyboard} contiene una opción \menu{swapControlAndAltKeys} que cambia las funciones \actclick y \metaclick.
También hay opciones para duplicar las diferentes teclas de comando.   

\begin{figure}[htb]
\centerline{\includegraphics[width=\textwidth]{PreferenceBrowser}}
\caption{El navegador de preferencias.\figlabel{prefBrowser}}
\end{figure}


%=================================================================
\section{El menú World}
\index{world menu}

\dothis{\Click nuevamente en el fondo de la ventana principal de \pharo.}
Verás el menú \menu{World} nuevamente.
La mayoría de los menues de \pharo son modales; puedes dejarlos en la pantalla todo el tiempo que desees haciendo \click{ing} el icono de pin en la esquina superior derecha. Hazlo.
% Also, notice that menus appear when you click the mouse, but do not disappear when you release it; they stay visible until you make a selection, or until you click outside of the menu. You can even move the menu around by grabbing its title bar.

El menú world menu te provee una forma simple para acceder a muchas de las herramientas que \pharo ofrece.

\dothis{Hecha una mirada a los menues \menu{World} y \menu{{}Tools \ldots}. (\figref{threeButtons:click})}

Verás una lista de varias herramientas principales en \pharo, incluyendo el navegador y el workspace.
Encontraremos la mayoría de ellos en los siguientes capítulos.

%=================================================================
\section{Enviando mensajes}

\dothis{Abre un workspace. Escribe el siguiente texto:}

\begin{code}{}
BouncingAtomsMorph new openInWorld
\end{code}

\dothis{Ahora \actclick. Debería aparecer un menú. Selecciona \menu{do it (d)}. (See \figref{doit}.)}

\begin{figure}[htb]
\centerline {\includegraphics[width=0.8\textwidth]{Doit}}
\caption{``Haciendo'' una expresión\figlabel{doit}}
\end{figure}

Una ventana conteniendo un gran nnúmero de átomos deberían abrirse arriba a la izquierda en \pharo.

¡Acabas de evaluar tu primera expresión \st!
Has enviado el mensaje \ct{new} a la clase \bam, resultando en una nueva instancia de \bam, seguido del mensaje \ct{openInWorld} a esta instancia.
La clase \bam decidió que hacer con el mensaje \ct{new}, esto es, buscó en sus \emph{métodos} cómo manejar el mensaje \ct{new} y reaccionó apropiadamante.
De forma similar la instancia de \bam buscó en sus métodos cómo responder a \ct{openInWorld} y tomó la acción apropiada.

Si hablas con Smalltalkers por un tiempos, rápidamente notarás que ellos generalmente no usan expresiones como ``llamar a una operación'' or ``invoke a method'', en su lugar dicen ``enviar un mensaje''.
Esto refleja la idea de que los objetos son responsables por sus propias acciones. 
Nunca le \emph{dices} a un objeto que hacer\,---\,en su lugar políticamente le \emph{pides} que haga algo enviándole un mensaje.
El objeto, no tú, selecciona el método apropiado para responder a tu mensaje.

%=================================================================
\section{Guardando, terminando y reiniciando una sesión de \pharo}

\dothis{Ahora haz \click en la ventana de átomos y arrastrala dónde quieras. Ahora tienes la demostración ``en tu mano''. Sueltala haciendo \click{ing} en cualquier parte.}

\begin{figure}[htb]
\begin{minipage}[b]{0.48\textwidth}
\centerline {\includegraphics[width=0.7\textwidth]{atoms}}
\caption{Un \bam.\figlabel{atoms}}
\end{minipage}
\hfill
\begin{minipage}[b]{0.48\textwidth}
\centerline {\includegraphics[width=0.7\textwidth]{saveAs}}
\caption{El cuadro de díalogo \menu{save as \ldots}.\figlabel{saveas}}
\end{minipage}
\end{figure}

\dothis{Selecciona \menu{World\go{}Save as \ldots}, ingresa el nombre ``myPharo'', y haz \click en el botón \button{OK}.
Ahora selecciona \menu{World\go{}Save and quit}.}

Ahora si vas a la ubicación donde lso archivos originales image y changes estaban, encontrarás dos nuevos archivos llamados``myPharo.\ind{image}'' y ``myPharo.\ind{changes}'' que representan el estado de trabajo de la imagen de \pharo en el momento anterior que dijeras a \pharo \menu{Save and quit}.
Si lo deseas, puedes mover estos dos archivos a cualquier lugar que gustes en tu disco, pero si lo haces puedes (dependiendo de tu sistema operativo) necesitar tambien mover, copiar o enlazar a la máquina virtual y el archivo \emph{sources}.

\dothis{Inicia \pharo desde el archivo ``myPharo.image'' recientemente creado.}

Ahora deberías encontrarte precisamente en el estado que estabas cuando terminaste \pharo. El \bam está allí nuevamente y los átomos continuan rebotando donde ellos estaban cuando tú terminaste.

Cuando inicias \pharo por pimera vez, la \ind{máquina virtual} de \pharo carga la imagen que le sumistres. El archivo que contiene una instantanea de un gran número de objetos, incluyendo una vasta cantidad de código preexistente y un gran número de herramientas de programación (los cuales son objetos). Trabajando con \pharo, enviarás mensajes a esos objetos, crearás nuevos objetos, y algunos de esos objetos norirán y su memoria será reclamada (\ie recolección de basura).

Cuando temines con \pharo, normalmente guradarás una instantaneaque contiene todos tus objetos. Si guardas normalmente, sobreescribirás tu viejo archivo de imagen con la nueva instantanea. Alternativamente, puedes gurdar la imagen con otro nombre, como acabamos de hacer.

Junto al archivo \emph{.image}, hay también un archivo \emph{.changes}.
Este archivo contiene una vitácora de todos los cambios del código fuente que has hecho usando usando las herramientas.
La mayor parte de las veces no necesitas preocuparte por este archivo para nada.
Como podemos ver, sin embargo, el archivo \emph{.changes} puede ser muy útil para recuperación de errores, o rehacer cambios perdidos.
¡Mas sobre esto luego!

La imagen con la que has estado trabajando es un descendiente de la imagen original de \st-80 creada a finales de los '70.
¡Algunos de esos objetos han estado allí por decadas!

Podrías pensar que la imagen es el mecanismo principal para almacenar proyectos de software, pero estrías equivocado.
Como veremos pronto, hay muchas mejores herramientas para administar código y compartir software desarrollado por equipos.
Las imagenes son muy útiles, pero deberías aprender a ser muy caballero acerca de crear y tirar imagenes, dado que herramientas como Monticello ofrecen una mejor forma de administrar versiones y compartir código entre desarrolladores.

\dothis{Usando el ratón (y la tecla modificadora apropiada), \metaclick en el \bam.\footnote{Recuerda, quizás tengas que activar la opción \ct{halosEnabled} en el Navegador de Preferencias.}}
Verás una colección de círculos coloridos que colectivamente son llamados el morphic \subind{Morphic}{halo} de \bam.
Cada círculo es llamado un \emph{manejador}.
Haz click en el manejador rosa conteniendo la cruz; el \bam debería haberse ido. 

%=================================================================
\section{Workspaces y Transcripts}
\seclabel{transcript}

\dothis{Cierra todas las ventanas abiertas. Abre un \ind{transcript} y un \ind{workspace}. (El transcript puede ser abierto desde \menu{World{\go}Tools ...} submenú.)}

\dothis{Posiciona y cambia el tamaño de la ventana transcript y de al ventana workspace para que el workspace se superponga al transcript.}
Puedes cambiar el tamaño de las ventanas arrstarndo una de sus esquinas, o \metaclick{ing} la ventana para hacer aparecer el morphic halo, y arrastrando el manejador amarillo (abajo a la derecha).

Al mismo tiempo sólo una venta está activa; está en el frente y tiene sus bordes iluminados.
% The mouse cursor must be in the window in which you wish to type.

El transcript es un objeto que a menudo es usado para emitir mensajes de sistema.
Es una clase de ``consola de sistema''.
%Note that the transcript is terribly slow, so if you keep it open and write to it certain operations can become 10 times slower.
%In addition the transcript is not thread-safe so you may experience strange problems if multiple objects write concurrently to the transcript.
% ON: I think the transcript has been made thread-safe now, right?

Workspaces son útiles para escribir porciones de código \st con las que te gustaría experimentar.
Puedes tambien usar workspaces simplemente para escribir texto arbitrario que te gustaría recordar, como una lista de tareas o instrucciones para alguien q ue usará tu imagen.
Workspaces son a menudo usados para mantener documentación acerca de una imagen capturada, como es el caso de la imagen estandar que descargamos anteriormente (see \figref{startup}).

\dothis{Escribe el siguiente texto en el workspace:}
\begin{code}{}
Transcript show: 'hello world'; cr.
\end{code}

Intenta hacer doble-\click{ing} en el workspace en varios puntos en el texto que acabas de escribir.
Notarás como una palabra entera, una cadena de caracteres entera, o el texto completo es seleccionado, dependiendo si haces \click en una palabra, al final de una cadena de caractere, o al final de toda la expresión.

\dothis{Selecciona el texto que acabas de escribir y haz \actclick.
Selecciona \menu{do it (d)}.}
Notarás como el texto ``hello world'' aparece en la ventana transcript
(\figref{helloworld}).
Hazlo nuevamente.
(La \menu{(d)} en el item de menú \menu{do it (d)} dice que el atajo de teclado para \emph{do it} es \short{d}. ¡Mas sobre esto en la siguiente sección!)

\begin{figure}[htb]
\centerline {\includegraphics[width=\textwidth]{HelloWorld}}
\caption{Superponiendo ventanas. El workspace está activo.\figlabel{helloworld}}
\end{figure}

%=================================================================
\section{Atajos de teclado}

Si quieres evaluar una expresión, no siempre tienes que hacer \actclick. En su lugar, puedes usar \ind{atajos de teclado}. Estos son las expresiones entre paréntesis en el menú. Dependiendo de la plataforma, puedes tener que presionar una de las teclas modificadoras (control, alt, command, o meta).
(Indicaremos estas genéricamten como \short{\emph{tecla}}.)

\dothis{Evalua la expresión en el workspace nuevamente, pero usando el atajo de teclado: \short{d}.}
\index{keyboard shortcut!do it}

Además de \menu{do it}, habrás notado \menu{print it}, \menu{inspect it} y \menu{explore it}. Hechemos una rápida mirada a cada una de estas

\dothis{Escribe \ct{3 + 4} en el workspace. Ahora \menu{do it} con el atajo de teclado.}

¡No te sorprendas si no viste nada ocurrir! Lo que acabas de hacer es enviar el mensaje \ct{+} con el argumento \ct{4} al número \ct{3}. Normalmente el resultado \ct{7} habrá sido sido computedo y retornado a ti, pero dado que el workspace sabía que hacer con la respuesta, simplemente se deshizo de la respuesta. Si queires ver el resultado, deberías elejir en su lugar \menu{print it}. \menu{print it} realmente compila la expresión, la ejecuta, envia el mensaje \ct{printString} al resultado, y muestra la cadena de caracteres resultante.

\dothis{selecciona \ct{3+4} y selecciona \menu{print it} (\short{p}).}
Esta vez vemos el resultado esperado (\figref{printit}).
\index{keyboard shortcut!print it}

\begin{figure}[htb]
% \centerline {\includegraphics[width=0.4\textwidth]{PrintIt}}
\centerline {\includegraphics[width=0.8\textwidth]{PrintIt}}
\caption{``print it'' en lugar de ``do it''. \figlabel{printit}}
\end{figure}

\needlines{3}
\begin{code}{@TEST}
3 + 4 --> 7
\end{code}
\noindent
Usamos la notación \ct{-->} como una convención en este libro para indicar que una expresión particular en \pharo devuelve un resultado dado cuando usas \menu{print it}.

\dothis{Borra el texto iluminado ``\ct{7}'' (\pharo debería haberlo seleccionado, entonces simplemente puedes presionar la tecla delete). Selecciona \ct{3+4} nuevamente y esta vez usa \menu{inspect it} (\short{i}).}
\noindent
Ahora deberías ver una nueva ventana, llamada un \emphind{inspector}, con el encabezado \ct{SmallInteger: 7} (\figref{inspectit}).
El inspector es una herramienta extremadamente útil que te permitirá navegar e interactuar con cualquier objeto en el sistema.
El título nos dice que \ct{7} es una instancia de la clase \clsind{SmallInteger}.
El panel izquierdo nos permite navegar variables de instancia del objeto, los valores de los cuales son mostrados en el panel derecho.
El panel inferior puede ser usado para escribir expresiones para enviar mensajes al objeto.

\begin{figure}[htb]
\centerline {\includegraphics[width=\textwidth]{InspectIt}}
\caption{Inspeccionando un objeto. \figlabel{inspectit}}
\end{figure}

\dothis{Escribe \ct{self squared} en el panel inferior del inspector en \ct{7} y usa \menu{print it}.}

\needlines{2}
\dothis{Cierra el inspector. Escribe la expresión \ct{Object} en un workspace y esta vez usa \menu{explore it} (\short{I}, mayúscula de i).}
\index{keyboard shortcut!explore it}
\index{explorer}

Esta vez deberías ver una ventana llamada \clsind{Object} conteninedo el texto
\mbox{$\triangleright$ \ct{root: Object}}.
Haz clic en el triángulo para abrirla (\figref{exploreit}).

\begin{figure}[htb]
\centerline {\includegraphics[width=0.7\textwidth]{ExploreIt}}
\caption{Explorando \ct{Object}. \figlabel{exploreit}}
\end{figure}

El explorador es similar al inspector, pero este ofrece una vista de arbol de un objeto complejo.
En este caso el objeto que estamos mirando es la clase \ct{Object}.
Podemos ver directamente toda la información almacenada en la clase, y podemos facilmente navegar todas sus partes.

%=================================================================
\section{El navegador de clases}

El \ind{browser} de clases\footnote{Confusamente, esto es referido varias veces como el ``navegador del sistema'' o el ``navegador de código''. \pharo usa la implementación \ind{OmniBrowser} para el navegador, el cual puede ser también conocido como ``OB'' o el ``navegador de paquetes''.
En este libro simplemente usaremos el término ``navegador'', o, en caso de ambiguedad, el ``navegador de clases''.} es una de las heramientas clave usada para programar.
Como podemos ver, hay varios navegadores disponibles para \pharo, pero este es el navegador básico que buscarás en cualquier imagen.
\seeindex{class browser}{browser}

\dothis{Abre un navegador seleccionando \menu{World \go Class browser}.\footnote{Si el navegador browser que abres no luce como el mostrado en \figref{classBrowser}, necesitas cambiar el navegador por defecto. Vea \faqref{packagebrowser}.}}

\begin{figure}[htb]
\ifluluelse
	{\centerline {\includegraphics[width=\textwidth]{ClassBrowser1}}}
	{\centerline {\includegraphics[width=0.7\textwidth]{ClassBrowser1}}}
\caption{El navegador mostrando el método \ct{printString} del objeto class.
\figlabel{classBrowser}}
\end{figure}

Podemos ver un navegador en \figref{classBrowser}.
La barra de título indica que estamos navegando la clase \clsind{Object}.
%\footnote{If the browser you have seems to differ from the one described in this book, you may be using an image with a different default browser. See \faqref{omnibrowser}.}

Cuando el navegador se abre por primera vez, todos los paneles están vacios menos el mas izquierdo.
El primer panel lista todo los \emph{paquetes} conocidos, los cuales contienen grupos de clases relacionadas.
\index{category}

\dothis{Haz clic en el paquete \scatind{Kernel}.}
Esto causa que el segundo panel muestre una lista de todas las clases en el paquete seleccionado.

\dothis{Selecciona la clase \clsind{Object}.}
Ahora los dos paneles restantes se completarán con texto.
El tercer panel muestra los \emph{protocolos} de la clase actualmente seleccionada.
Estos son agrupaciones convenientes de métodos relacionados.
Si ningún \ind{protocolo} es seleccionado deberías ver todos los métodos en el cuarto panel.

\dothis{Selecciona el protocolo \protind{printing}.}
Quizás necesites desplazarte hacia abajo para encontrarlo.
Verás en el cuarto panel sólo métodos relacionado con impresión.

\dothis{Selecciona el método \mthind{Object}{printString}.}
Vemos en el panel inferior el código fuente del método \ct{printString}, compartido por todos los objetos en el sistema (excepto por aquellos que los sobreescriben).

%=================================================================
\section{Encontrando clases}

Hay varias formas de encontrar una clase en \pharo. La primera, como acabamos de ver, es conocer (o adivinar) en qué categoría está, y navegar hacia ella usando el navegador.
\index{browser}
\seeindex{browser!finding classes}{class, finding}
\index{class!finding}

Una segunda forma es enviar el mensaje \ct{browse} a la clase, pidiéndole que abra un navegador en ella misma. Supongamos que queremos navegar la clase \clsind{Boolean}.

\dothis{Escribe \ct{Boolean browse} dentro de un workspace y \menu{do it}.}
Se abrirá un navegador con la clase Boolean (\figref{browseBoolean}).
Hay también un \ind{atajo de teclado} \short{b} (browse) que puedes usar en cualquier herramienta donde encuentres un nombre de clase;
\index{keyboard shortcut!browse it}
Selecciona el nombre y escribe \short{b}.

\dothis{Usa el atajo de teclado para navegar la clase \ct{Boolean}.}

\begin{figure}[hbt]
\centerline {\includegraphics[width=\textwidth]{Kernel-objects-boolean}}
\caption{El navegador mostrando la definición de la clase Boolean.
\figlabel{browseBoolean}}
\end{figure}

Cuando la clase \ct{Boolean} es seleccionada pero ningún protocolo o método es seleccionado, en lugar del código fuente de un método, vemos una \emph{definición de clase} (\figref{browseBoolean}).
Esto no es mas que un mensaje \st ordinario que es enviado a la clase padre, pidiéndolea crear una subclase.
Aquí vemos que a la clase \ct{Object} se le pide crear una subclase llamada \ct{Boolean} sin variables de instancia, variables de clase o ``pool dictionaries'', y poner la clase \ct{Boolean} en la categoría \scatind{Kernel-Objects}.
% The lower pane shows the \emph{class comment} --- a piece of plain text describing the class.
Si haces \click en el \button{?} al pie del panel de clase, puedes ver \subind{class}{comment} en un panel dedicado (ver \figref{classComment}).

\begin{figure}[hbt]
\centerline {\includegraphics[width=\textwidth]{classComment}}
\caption{Los comentarios de la clase \ct{Boolean}.
\figlabel{classComment}}
\end{figure}

A menudo, la forma mas rápida de encontrar una clase es buscarla por nombre. Por ejemplo, supongamo que estás buscando una clase que represente fechas y horas.

\dothis{Pon el ratón en el panel de paquete del navegador y escribe \short{f}, o selecciona \menu{find class \ldots (f)} haciendo \actclick{ing}. Escribe ``time'' en el cuadro de diálogo y acéptalo.} 
\noindent
Se presentará una lista de clases cuyos nombre contienen ``time'' (ver \figref{findit}). Elige una, digamos, \ct{Time}, y el navegador la mostrará, junto con comentario de clase que sugiere otras clases que pueden ser útiles. Si quieres navegar una de las otras, selecciona su nombre (en caulquier panel), y escribe \short{b}.
\index{keyboard shortcut!find ...}
\index{keyboard shortcut!browse it}

\begin{figure}[hbt]
\centerline{
	\includegraphics[width=0.45\textwidth]{FindIt}
	\hspace{1cm}
	\includegraphics[width=0.45\textwidth]{TimeClasses}
}
\caption{Buscando una clase por nombre.
\figlabel{findit}}
\end{figure}

Si escribes el nombre completo (respetando mayúsculas y minúsculas) de una clase en el cuadro de diálogo de búsqueda, el navegador irá directamente a esa clase sin mostrarle la lista de opciones.

%=================================================================
\section{Encontrando métodos}
\seclabel{quick:methodFinder}

Algunas veces puedes adivinar el nombre de un método, o al menos parte del nombre de un método, mas facilmente que el nombre de una clase. Por ejemplo, si estás interesado en la hora actual, quizás esperas que haya un método llamado ``now'', o conteniendo ``now'' como parte de su nombre. Pero ¿dónde podría estar?
El \emphind{buscador de métodos} puede ayudarte.
\seeindex{browser!finding methods}{method, finding}
\index{method!finding}

\dothis{Selecciona \menu{World \go Tools ... \go Method finder}.
Escribe ``now'' en el panel superior izquierdo, y luego \menu{accept} (o simplemente presiona la tecla \textsc{return}).}
El buscador de métodos mostrará una lista de todos los nombres de los métodos que contienen la palabra ``now''.
Para desplazar hasta \ct{now}, mueve el cursor en la lista y escribe ``\ct{n}''; este truco funciona en todas las ventanas con desplazamiento. Selecciona ``now'' y el panel derecho mostrará las clases que definen un método con este nombre, como se muestra en \figref{MethodFinder}. Seleccionando cualquiera de ellas se abrirá un navegador en ella.

\begin{figure}[hbt]
\centerline {\includegraphics[width=0.7\textwidth]{methodFinder-now}}
\caption{El buscador de métodos mostrando todas las clases que definen un método llamado \ct{now}.
\figlabel{MethodFinder}}
\end{figure}

Otras veces quizás tienes idea que un métod existe, pero no tendrás idea cuál es su nombre.
¡El buscador de métodos aún puede ayudar! Por ejemplo, supongamos que te gustaría encontrar un método que transforme una cadena de caracteres en mayúsculas, por ejemplo, traduciría \ct{'eureka'} en \ct{'EUREKA'}.

\dothis{Escribe \ct{'eureka' . 'EUREKA'} en el búscador de métodos y presiona 
  la tecla \textsc{return}, como se muestra en 
  \figref{methodFinder-example1}.}
\noindent
El buscador de métodos sugerirá un método que hace lo que quieres.\footnote{Si una ventana es desplegada con una advertencia aerca de una método deprecado, no tengas miedo --- el buscador de métodos está simplemente está probando todos los posibles candidatos, incluyendo métodos deprecados. Simplemente \click ~\button{Proceed}.}

Un asterico al comienzo de una linea en el panel derecho del buscador de métodos indica que este método de los que fué realmente usado para obtener el resultado solicitado. 
El asterisco delante de \ct{String asUppercase} nos permite saber que el métodous \mthind{String}{asUppercase} definido en la clase \clsind{String} fue executado y retornó el resultado buscado. Los métodpós que no tiene un asterisco son los otros métodos que tiene el mismo nombre que los métodos que retornaron el resultado esperado. \cmind{Character}{asUppercase} no fue ejecutado en nuestro ejemplo, porque \ct{'eureka'} no es un objeto \clsind{Character}.

\begin{figure}[hbt]
\centerline {\includegraphics[width=\textwidth]{MethodFinder-example1}}
\caption{Encontrando un método mediante un ejemplo.
\figlabel{methodFinder-example1}}
\end{figure}

Puede también usar el nuscador de métodos con argumentos; por ejemplo, si estás buscando un métod que encuentre el máximo factor común entre dos enteros, puedes probar \ct{25. 35. 5} como ejemplo. Puedes darle al buscador de métodos múltiples ejemplos para reducir el espacio de búsqueda; el texto de ayuda en el panel inferior explica cómo.

%=================================================================
\section{Definiendo un nuevo método}

El advenimiento de \ind{Test Driven Development}\cite{Beck03a} (TDD) ha cambiado la forma que escribimos código.
La idea detrás de TDD es que escribimos una prueba que define el comportamiento deseado de nuestro código \emph{antes} de escribir el propio código.
Sólo entonces escribimos el código que satisface la prueba.
\seeindex{Behavior Driven Development}{Test Driven Development}
% \orla{describe the technique where we write a test hat ... subsequently we write ...}

Supongamos que nuestra tarea es ecribir un método que ``decir algo fuerte y con énfasis''. ¿Qué podría significar esto exactamente? ¿Cuál sería un buen nombre para el método? ¿Cómo podemos estar seguros que los programadores quienes quizás tengan que mantener nuestro método en el futuro tendrán una descripción unívoca de lo que el método debería hacer? Podemos responder todas estas preguntas dando un ejemplo:

\begin{quote}
Cuando enviamos el mensaje \ct{shout} a la cadena de caracteres ``Don't panic'' el resultado debería ser ``DON'T PANIC!''.
\end{quote}

\noindent
Para hacer de este ejemplo en algo que el sistema pueda usar, lo ponemos dentro de un método de prueba:
\index{testing}
\index{SUnit}

\needlines{3}
\begin{method}[testShout]{Una prueba para un método gritar}
testShout
	self assert: ('Don''t panic' shout = 'DON''T PANICBANG')
\end{method} % BANG is the escape for !

¿Cómo creamos un nuevo método en \pharo? Primero, tenemos que decidir a que clase debería pertencer el métodoto.
En este caso, el método \ct{shout} que estamos probando irá en la clase \clsind{String}, por lo que la prueba correspondiente irá, por convención, en una clase llamada \clsind{StringTest}.

\begin{figure}[hbt]
\centerline {\includegraphics[width=\textwidth]{StringTest-newMethodTemplate}}
\caption{El nuevo método en la clase \ct{StringTest}.
\figlabel{newMethodTemplate}}
\end{figure}

\dothis{Abre un navegador en la clase \ct{StringTest}, y selecciona el protocolo apropiado para nuestro método, en este caso \menu{tests - converting}, como se muestra en \figref{newMethodTemplate}.
El texto seleccionado en el panel inferior es una plantilla que te recuerda cómo luce un método \st.
Borralo y escribe el código del método \mthref{testShout}.}
Una vez que hayas escrito el texto en el navegador, notarás que el panel inferior se torna rojo. Esto es un recordatorio de que el panel contien cambios sin guardar.
Selecciona \menu{accept (s)} haciendo \actclick{ing} en el panel inferior, o simpelmente escribe \short{s}, para compilar y guardar el método.
\index{keyboard shortcuts}
\index{keyboard shortcut!accept}
\seeindex{accept it}{keyboard shortcut, accept}

Si este es la priera vez que has guardado código en tu imagen, probablemente te pedirá que ingreses tu nombre. Dado que mucha gente ha contribuido con código a la imagen, es importante mantener un seguimiento de cualquiera que cree o modifique métodos. Simpelmente ingresa tu nombre y apellido, sin espacios, o separados por un punto.

%\begin{figure}[hbt]
%\centerline {\includegraphics[width=0.35\textwidth]{initials}}
%\caption{Entering your initials.
%\figlabel{initials}}
%\end{figure}

Because there is as yet no method called \ct{shout}, the browser will ask you to confirm that this is the name that you really want\,---\,and it will suggest some other names that you might have intended (\figref{testShoutConfirm}).
This can be quite useful if you have merely made a typing mistake, but in this case, we really \emph{do} mean \ct{shout}, since that is the method we are about to create, so we have to confirm this by selecting the first option from the menu of choices, as shown in \figref{testShoutConfirm}. 


%\begin{figure}[htb]
%\begin{minipage}[b]{0.48\textwidth}
%\centerline {\includegraphics[width=0.9\textwidth]{name}}
%\caption{Entering your name.\figlabel{name}}
%\end{minipage}
%\hfill
%\begin{minipage}[b]{0.48\textwidth}
%\centerline {\includegraphics[width=\textwidth]{testShoutConfirm}}
%\caption{Accepting the \ct{StringTest} method \ct{testShout}.\figlabel{testShoutConfirm}}
%\end{minipage}
%\end{figure}

\begin{figure}[htb]
\centerline {\includegraphics[width=0.6\textwidth]{name}}
\caption{Entering your name.\figlabel{name}}
\end{figure}

\begin{figure}[htb]
\centerline {\includegraphics[width=\textwidth]{testShoutConfirm}}
\caption{Accepting the \ct{StringTest} method \ct{testShout}.\figlabel{testShoutConfirm}}
\end{figure}


%\begin{figure}[hbt]
%\ifluluelse
%	{\centerline {\includegraphics[width=\textwidth]{testShoutConfirm}}}
%	{\centerline {\includegraphics[width=0.7\textwidth]{testShoutConfirm}}}
%\caption{Accepting the \ct{StringTest} method \ct{testShout}.
%\figlabel{testShoutConfirm}}
%\end{figure}

\dothis{Run your newly created test: open the \ind{SUnit} \emphind{TestRunner} from the \menu{World} menu.}

The leftmost two panes are a bit like the top panes in the browser.  The left pane contains a list of categories, but it's restricted to those categories that contain test classes.

\dothis{Select \scat{CollectionsTests-Text} and the pane to the right will show all of the test classes in that category, which includes the class \ct{StringTest}.  The names of the classes are already selected, so \click \menu{Run Selected} to run all these tests.}

\begin{figure}[hbt]
\centerline {\includegraphics[width=\textwidth]{testRunnerOnStringTest}}
\caption{Running the String tests.
\figlabel{testRunnerTestShout}}
\end{figure}

You should see a message like that shown in \figref{testRunnerTestShout}, which indicates that there was an error in running the tests.  The list of tests that gave rise to errors is shown in the bottom right pane; as you can see, \ct{StringTest>>>#testShout} is the culprit.
(Note that \ct{StringTest>>#testShout} is the Smalltalk way of identifying the \mthind{StringTest}{testShout} method of the \ct{StringTest} class.)
If you \click on that line of text, the erroneous test will run again, this time in such a way that you see the error happen: ``\ct{MessageNotUnderstood: ByteString>>>shout}''.
\seeindex{\ct{>>}}{Behavior, \ct{>>}}
\cmindex{Behavior}{>>}

The window that opens with the error message is the \st debugger (see \figref{predebugger}).
% \ab{Well, it's actually the \emph{pre-}debugger.  Does this matter?}\damien{I don't think it's important at this point.}
We will look at the \ind{debugger} and how to use it in \charef{env}.

\begin{figure}[hbt]
\centerline {\includegraphics[width=\textwidth]{Predebugger}}
\caption{The (pre-)debugger.}
\figlabel{predebugger}
\end{figure}

The error is, of course, exactly what we expected:  running the test generates an error because we haven't yet written a method that tells strings how to \ct{shout}.  
Nevertheless, it's good practice to make sure that the test fails because this confirms that we have set up the testing machinery correctly and that the new test is actually being run.
Once you have seen the error, you can \button{Abandon} the running test, which will close the debugger window.
Note that often with Smalltalk you can define the missing method using the \button{Create} button, edit the newly-created method in the debugger, and then \button{Proceed} with the test.

Now let's define the method that will make the test succeed!

\dothis{Select class \clsind{String} in the browser, select the \menu{converting} protocol, type the text in \mthref{shout} over the method creation template, and \menu{accept} it.
(Note: to get a \mbox{\ct{^}}, type \caret). }
\begin{method}[shout]{The shout method}
shout
	^ self asUppercase, 'BANG'
\end{method}

The comma is the string concatenation operation, so the body of this method appends an exclamation mark to an upper-case version of whatever \ct{String} object the \ct{shout} message was sent to.
The $\uparrow$ tells \pharo that the expression that follows is the answer to be returned from the method, in this case the new concatenated string.
\seeindex{comma}{Collection, comma operator}
\index{Collection!comma operator}

Does this method work?  Let's run the tests and see.

\dothis{Click on \menu{Run Selected} again in the test runner, and this time you should see a green bar and text indicating that all of the tests ran with no failures and no errors.}
When you get to a green bar\footnotemark, it's a good idea to save your work and take a break.  
So do that right now!
%\footnotetext{Actually, you might not get a green bar since some images contains tests for bugs that still need to be fixed.
%Don't worry about this.
%\pharo is constantly evolving.
%}

\begin{figure}[hbt]
\ifluluelse
	{\centerline{\includegraphics[width=\textwidth]{String-Shout}}}
	{\centerline{\includegraphics[width=0.7\textwidth]{String-Shout}}}
\caption{The \ct{shout} method defined on class \ct{String}.
\figlabel{String-shout}}
\end{figure}

%=================================================================
\section{Chapter summary}
This chapter has introduced you to the \pharo environment and shown you how to use some of the major tools, such as the browser, the method finder, and the test runner.   You have also seen a little of \pharo's syntax, even though you may not understand it all yet.

\begin{itemize}
  \item A running \pharo system consists of a \emph{virtual machine}, a \emph{sources} file, and \emph{image} and \emph{changes} files. Only these last two change, as they record a snapshot of the running system.
  \item When you restore a \pharo image, you will find yourself in exactly the same state\,---\,with the same running objects\,---\,that you had when you last saved that image.
  \item \pharo is designed to work with a three-button mouse to \click, \actclick or \metaclick.  If you don't have a three-button mouse, you can use modifier keys to obtain the same effect.
  \item You \click on the \pharo background to bring up the \emph{World menu} and launch various tools.
  \item A \emph{workspace} is a tool for writing and evaluating snippets of code. You can also use it to store arbitrary text.
  \item You can use \ind{keyboard shortcuts} on text in the workspace, or any other tool, to evaluate code. The most important of these are \menu{do it} (\short{d}), \menu{print it} (\short{p}), \menu{inspect it} (\short{i}), \menu{explore it} (\short{I}) and \menu{browse it} (\short{b}).
%  \item \sqmap is a tool for loading useful packages from the Internet.
  \item The \emph{browser} is the main tool for browsing \pharo code, and for developing new code.
  \item The \emph{test runner} is a tool for running unit tests. It also supports Test Driven Development.
\end{itemize}

%=================================================================
\ifx\wholebook\relax\else 
   \bibliographystyle{jurabib}
   \nobibliography{scg}
   \end{document}
\fi
%=================================================================

%%% Local Variables:
%%% coding: utf-8
%%% mode: latex
%%% TeX-master: t
%%% TeX-PDF-mode: t
%%% ispell-local-dictionary: "english"
%%% End:
